# Migration `20201127180142-l`

This migration has been generated by cesar93683 at 11/27/2020, 10:01:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Post" (
"id" SERIAL,
    "title" TEXT NOT NULL,
    "content" TEXT NOT NULL,
    "authorId" INTEGER NOT NULL,
    "numComments" INTEGER NOT NULL,
    "numVotes" INTEGER NOT NULL,
    "dateCreated" TEXT NOT NULL,
    "dateUpdated" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Vote" (
"id" SERIAL,
    "value" INTEGER NOT NULL,
    "authorId" INTEGER NOT NULL,
    "postId" INTEGER NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Comment" (
"id" SERIAL,
    "content" TEXT NOT NULL,
    "authorId" INTEGER NOT NULL,
    "postId" INTEGER NOT NULL,
    "dateCreated" TEXT NOT NULL,
    "dateUpdated" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "User" (
"id" SERIAL,
    "email" TEXT NOT NULL,
    "password" TEXT NOT NULL DEFAULT E'',
    "username" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")

CREATE UNIQUE INDEX "User.username_unique" ON "User"("username")

ALTER TABLE "Post" ADD FOREIGN KEY("authorId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Vote" ADD FOREIGN KEY("authorId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Vote" ADD FOREIGN KEY("postId")REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Comment" ADD FOREIGN KEY("authorId")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Comment" ADD FOREIGN KEY("postId")REFERENCES "Post"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201127180142-l
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,52 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgres"
+  url = "***"
+}
+
+model Post {
+  id          Int       @default(autoincrement()) @id
+  title       String
+  content     String
+  author      User      @relation(fields: [authorId], references: [id])
+  authorId    Int
+  comments    Comment[]
+  numComments Int
+  votes       Vote[]
+  numVotes    Int
+  dateCreated String
+  dateUpdated String
+}
+
+model Vote {
+  id          Int       @default(autoincrement()) @id
+  value       Int
+  author      User      @relation(fields: [authorId], references: [id])
+  authorId    Int
+  post        Post      @relation(fields: [postId], references: [id])
+  postId      Int
+}
+
+model Comment {
+  id          Int       @default(autoincrement()) @id
+  content     String
+  author      User      @relation(fields: [authorId], references: [id])
+  authorId    Int
+  post        Post      @relation(fields: [postId], references: [id])
+  postId      Int
+  dateCreated String
+  dateUpdated String
+}
+
+model User {
+  id          Int       @default(autoincrement()) @id
+  email       String    @unique
+  password    String    @default("")
+  username    String    @unique
+  posts       Post[]
+  comments    Comment[]
+  votes       Vote[]
+}
```


